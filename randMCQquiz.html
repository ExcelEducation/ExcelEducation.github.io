<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<style>
		.flex { display:flex;}

		.field {
		  min-width: 200px;
		  min-height: 30px;
		  margin: 10px;
		}

		button {
		  height: 40px;
		  width: 200px;
		  outline: none;
		  background: white;
		  border: black solid 2px;
		}

		button:active {
		  background: blue;
		}	
	</style>
	
	<script>
		//variables
		var quiz = [];
		quiz[0] = new Question("100න් 1/4 කීයද ?", "25", "24", "23");
		quiz[1] = new Question("රුධිරයේ වර්ණය කුමක්ද ?", "Red", "White", "Green");
		quiz[2] = new Question("තණකොළ වල පාට කුමක්ද ?", "Green", "White", "Red");
		quiz[3] = new Question("How many legs does a spider have?", "8", "6", "4");
		quiz[4] = new Question("නෙදර්ලන්තයේ රජතුමා කවුද ?", "Willem-Alexander", "Willem-Alexzelf", "Willem-Alexniemand");
		quiz[5] = new Question("2-2 කීයද ?", "0", "2", "4");
		quiz[6] = new Question("What was Vincent van Gogh?", "Artist", "Baker", "Jobless");
		
		var randomQuestion;
		var answers = [];
		var currentScore = 0;
		var currentQnNumber = 0;
		var numQuestions = 3;
		var qnNumbers = getRandQnNumbers(6, numQuestions);		
	
		document.addEventListener("DOMContentLoaded", function(event) { 
		  btnProvideQuestion();
		});

		function Question(question,rightAnswer,wrongAnswer1,wrongAnswer2) {
			this.question = question;
			this.rightAnswer = rightAnswer;
			this.wrongAnswer1 = wrongAnswer1;
			this.wrongAnswer2 = wrongAnswer2;
		};

		function shuffle(o) {
			for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
			return o;
		};

		function btnProvideQuestion() { 		  
		
			if(currentQnNumber < numQuestions)
			{
				//var randomNumber = Math.floor(Math.random()*quiz.length);
				//randomQuestion = quiz[randomNumber]; //getQuestion
				var qnNumber = qnNumbers[currentQnNumber];
				randomQuestion = quiz[qnNumber]; //getQuestion
				answers = [randomQuestion.rightAnswer, randomQuestion.wrongAnswer1, randomQuestion.wrongAnswer2];
				shuffle(answers);

				document.getElementById("question").innerHTML= randomQuestion.question;
				document.getElementById("answerA").value= answers[0];
				document.getElementById("answerA").innerHTML= answers[0];
				document.getElementById("answerB").value= answers[1];
				document.getElementById("answerB").innerHTML= answers[1];
				document.getElementById("answerC").value= answers[2];
				document.getElementById("answerC").innerHTML= answers[2];					
			}	
			
			currentQnNumber++;
		}

		function getRandQnNumbers(qnCount)
		{
			// qnCount - total number of questions available
			var arr = [];
			while(arr.length < numQuestions){
				var r = Math.floor(Math.random() * qnCount) + 1;
				if(arr.indexOf(r) === -1) arr.push(r);
			}
			
			return arr;
		}
		
		function answerClicked(objQn) {
			if(currentQnNumber <= numQuestions)
			{
				var answer = objQn.value;
				checkAnswer(answer);		
			}
		}

		function adjustScore(isCorrect) {
			if(currentQnNumber <= numQuestions)
			{
				debugger;
				if (isCorrect) {
					currentScore++;
				} else {
					if (currentScore > 0) {
						currentScore--;
					}
				}
				document.getElementById("score").innerHTML = currentScore;			
			}
		}

		function checkAnswer(answer) {  
			if (answer == randomQuestion.rightAnswer) {
				adjustScore(true);
				btnProvideQuestion();
			} else { 
				//alert("Loser!");
				adjustScore(false);
				btnProvideQuestion();
			}	  
		}
	
	</script>
</head>
<body>
	<div class="flex">
	  <div class="field">Score</div>
	  <div id="score" class="field">0</div>
	</div>
	<div class="flex">
	  <div class="field">Question</div>
	  <div id="question" class="field"></div>
	</div>
	<div class="flex">
	  <div class="field">Answer A</div>
	  <button id="answerA" onclick="answerClicked(this)"></button>
	</div>
	<div class="flex">
	  <div class="field">Answer B</div>
	  <button id="answerB" onclick="answerClicked(this)"></button>
	</div>
	<div class="flex">
	  <div class="field">Answer C</div>
	  <button id="answerC" onclick="answerClicked(this)"></button>
	</div>
</body>
</html>